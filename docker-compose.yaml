services:
    animemo-db:
      image: postgres:14
      container_name: animemo-db
      restart: always
      volumes:
        - pgdata:/var/lib/postgresql/data
      environment:
        - POSTGRES_DB=postgres
        - POSTGRES_USER=postgres
        - POSTGRES_PASSWORD=postgres
      ports:
        - "5432:5432"
      networks:
        - network

    animemo-app:
      build: .
      container_name: animemo-app
      volumes:
        - .:/app
      ports:
        - "8000:8000"
      environment:
        - POSTGRES_NAME=postgres
        - POSTGRES_USER=postgres
        - POSTGRES_PASSWORD=postgres
      depends_on:
        - animemo-db
      links:
        - animemo-db:animemo-db
      networks:
        - network

networks:
    network:
      driver: bridge

volumes:
  pgdata:
